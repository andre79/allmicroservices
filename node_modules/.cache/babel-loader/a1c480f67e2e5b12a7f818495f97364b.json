{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/andre/Documentos/gitproject/allmicroservices/src/pages/cart/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Grid, Container, Table, Message, Button, Header, List, Divider, Input } from 'semantic-ui-react';\nimport Menu from '../../components/header';\nimport { fetchData, listCache, setCache } from '../../services/Resource';\nimport { useToasts } from 'react-toast-notifications';\n\nconst Cart = () => {\n  _s();\n\n  const {\n    addToast\n  } = useToasts();\n  const [products, setProducts] = useState([]);\n  const [totalSum, setTotalSum] = useState('0,00');\n  const [totalQuantity, setTotalQuantity] = useState(0);\n  const [checkoutItems, setCheckoutItems] = useState(0);\n  const [cep, setCep] = useState('');\n  const [orderInfo, setOrderInfo] = useState(null);\n  const [cepMessage, setCepMessage] = useState(false);\n\n  const sumOfProducts = checkout => {\n    const convertToSum = checkout.map(item => item.price.replace(',', '.'));\n    const totalPrice = convertToSum.reduce((acumulador, valorAtual) => acumulador + parseFloat(valorAtual), 0);\n    return totalPrice.toFixed(2).toString().replace('.', ',');\n  };\n\n  const sumTotal = (productValue, deliveryValue) => {\n    const convertToSumA = productValue.replace(',', '.');\n    const convertToSumB = deliveryValue.replace(',', '.');\n    return parseFloat(convertToSumA) + parseFloat(convertToSumB);\n  };\n\n  useEffect(() => {\n    const storage = listCache('storageCoffee');\n    setTotalSum(sumOfProducts(storage));\n    setTotalQuantity(storage.length);\n    setProducts(storage);\n  }, [setProducts]);\n\n  const handleRemove = id => {\n    const newStorage = products.filter(item => item.id !== id);\n    setCache('storageCoffee', [...newStorage]);\n    setProducts([...newStorage]);\n    setTotalSum(sumOfProducts(newStorage));\n    setCheckoutItems(newStorage.length);\n    setTotalQuantity(newStorage.length);\n    addToast('Item removido de sua sacola', {\n      appearance: 'success',\n      autoDismiss: true\n    });\n  };\n\n  const cepValidate = () => {\n    fetchData(`shipping/${cep}`).then(({\n      data\n    }) => {\n      setOrderInfo(data.shipping);\n      setCepMessage(false);\n    }).catch(err => {\n      setCepMessage(true);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Page, {\n    children: [/*#__PURE__*/_jsxDEV(Menu, {\n      page: \"cart\",\n      itemsQuantity: checkoutItems\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        className: \"content-inner\",\n        children: /*#__PURE__*/_jsxDEV(Grid.Row, {\n          children: [/*#__PURE__*/_jsxDEV(Grid.Column, {\n            width: 10,\n            children: products.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Table, {\n                basic: \"very\",\n                children: [/*#__PURE__*/_jsxDEV(Table.Header, {\n                  children: /*#__PURE__*/_jsxDEV(Table.Row, {\n                    children: [/*#__PURE__*/_jsxDEV(Table.HeaderCell, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 73,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(Table.HeaderCell, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 74,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(Table.HeaderCell, {\n                      children: \"Quantidade\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 75,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(Table.HeaderCell, {\n                      children: \"Pre\\xE7o\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 76,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(Table.HeaderCell, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 77,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 72,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 71,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Table.Body, {\n                  children: products && products.map(item => /*#__PURE__*/_jsxDEV(Table.Row, {\n                    children: [/*#__PURE__*/_jsxDEV(Table.Cell, {\n                      style: {\n                        textAlign: 'center'\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: item['image_thumb'],\n                        alt: \"\",\n                        height: \"76\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 85,\n                        columnNumber: 96\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 85,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                      children: item.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 86,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                      children: \"1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 87,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                      children: `R$ ${item.price}`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 88,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                      children: /*#__PURE__*/_jsxDEV(Button, {\n                        circular: true,\n                        icon: \"trash alternate outline\",\n                        onClick: () => handleRemove(item.id)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 89,\n                        columnNumber: 65\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 89,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 84,\n                    columnNumber: 49\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Calcule frete e prazo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                placeholder: \"Digite o cep\",\n                maxlength: \"8\",\n                style: {\n                  margin: '0 10px'\n                },\n                value: cep,\n                onChange: e => setCep(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                content: \"OK\",\n                color: \"blue\",\n                onClick: () => cepValidate()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 33\n              }, this), cepMessage && /*#__PURE__*/_jsxDEV(Message, {\n                visible: true,\n                warning: true,\n                children: \"Ops, ocorreu um erro inesperado. Tente novamente.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 48\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(Message, {\n              visible: true,\n              children: \"Sua sacola est\\xE1 vazia\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid.Column, {\n            width: 6,\n            children: /*#__PURE__*/_jsxDEV(Order, {\n              children: [/*#__PURE__*/_jsxDEV(Header, {\n                as: \"h3\",\n                children: \"Resumo do pedido\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(List, {\n                verticalAlign: \"middle\",\n                children: [/*#__PURE__*/_jsxDEV(List.Item, {\n                  children: [/*#__PURE__*/_jsxDEV(List.Content, {\n                    floated: \"right\",\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: `R$ ${totalSum}`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 116,\n                      columnNumber: 71\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 116,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(List.Content, {\n                    children: `${totalQuantity} produtos`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 117,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 37\n                }, this), orderInfo && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(List.Item, {\n                    children: [/*#__PURE__*/_jsxDEV(List.Content, {\n                      floated: \"right\",\n                      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: `R$ ${orderInfo.value}`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 123,\n                        columnNumber: 79\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 123,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(List.Content, {\n                      children: \"Frete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 124,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(List.Item, {\n                    children: /*#__PURE__*/_jsxDEV(List.Content, {\n                      children: [\"Entrega em \", orderInfo.days, \" \\xFAteis\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 127,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 130,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(List.Item, {\n                    children: [/*#__PURE__*/_jsxDEV(List.Content, {\n                      floated: \"right\",\n                      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: `R$ ${sumTotal(totalSum, orderInfo.value)}`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 133,\n                        columnNumber: 79\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 133,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(List.Content, {\n                      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"TOTAL\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 134,\n                        columnNumber: 63\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 134,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 132,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    fluid: true,\n                    color: \"green\",\n                    children: \"Continuar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Cart, \"qkPiAMQp4PCs07upXMWv0YdxbhQ=\", false, function () {\n  return [useToasts];\n});\n\n_c = Cart;\nexport default Cart;\nconst Page = styled.section`\n    .content-inner {\n        margin-top: 20px;\n    }\n    .table th {\n        border-top: none;\n    }\n`;\n_c2 = Page;\nconst Order = styled.div`\n    background-color: #f8f8f8;\n    padding: 15px;\n`;\n_c3 = Order;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Cart\");\n$RefreshReg$(_c2, \"Page\");\n$RefreshReg$(_c3, \"Order\");","map":{"version":3,"sources":["/home/andre/Documentos/gitproject/allmicroservices/src/pages/cart/index.js"],"names":["React","useState","useEffect","styled","Grid","Container","Table","Message","Button","Header","List","Divider","Input","Menu","fetchData","listCache","setCache","useToasts","Cart","addToast","products","setProducts","totalSum","setTotalSum","totalQuantity","setTotalQuantity","checkoutItems","setCheckoutItems","cep","setCep","orderInfo","setOrderInfo","cepMessage","setCepMessage","sumOfProducts","checkout","convertToSum","map","item","price","replace","totalPrice","reduce","acumulador","valorAtual","parseFloat","toFixed","toString","sumTotal","productValue","deliveryValue","convertToSumA","convertToSumB","storage","length","handleRemove","id","newStorage","filter","appearance","autoDismiss","cepValidate","then","data","shipping","catch","err","textAlign","name","margin","e","target","value","days","Page","section","Order","div"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Grid, Container, Table, Message, Button, Header, List, Divider, Input } from 'semantic-ui-react'\nimport Menu from '../../components/header';\nimport { fetchData, listCache, setCache } from '../../services/Resource';\nimport { useToasts } from 'react-toast-notifications'\n\nconst Cart = () => {\n\n    const { addToast } = useToasts();\n    const [ products, setProducts ] = useState([]);\n    const [ totalSum, setTotalSum ] = useState('0,00');\n    const [ totalQuantity, setTotalQuantity ] = useState(0);\n    const [ checkoutItems, setCheckoutItems ] = useState(0);\n    const [ cep, setCep ] = useState('');\n    const [ orderInfo, setOrderInfo ] = useState(null);\n    const [ cepMessage, setCepMessage ] = useState(false);\n\n    const sumOfProducts = (checkout) => {\n        const convertToSum = checkout.map( item => item.price.replace(',', '.') );\n        const totalPrice = convertToSum.reduce( (acumulador, valorAtual) => acumulador + parseFloat(valorAtual), 0);\n\n        return totalPrice.toFixed(2).toString().replace('.', ',');\n    };\n\n    const sumTotal = (productValue, deliveryValue) => {\n        const convertToSumA = productValue.replace(',', '.');\n        const convertToSumB = deliveryValue.replace(',', '.');\n\n        return parseFloat(convertToSumA) + parseFloat(convertToSumB);\n    };\n\n    useEffect(() => {\n        const storage = listCache('storageCoffee');\n\n        setTotalSum(sumOfProducts(storage));\n        setTotalQuantity(storage.length);\n        setProducts(storage);          \n    }, [setProducts]);\n\n    const handleRemove = (id) => {\n        const newStorage = products.filter( item => item.id !== id);  \n\n        setCache('storageCoffee', [...newStorage]);\n        setProducts([...newStorage]);\n        setTotalSum(sumOfProducts(newStorage));\n        setCheckoutItems(newStorage.length);  \n        setTotalQuantity(newStorage.length);\n        addToast('Item removido de sua sacola', { appearance: 'success', autoDismiss: true });\n    };\n\n    const cepValidate = () => {\n        fetchData(`shipping/${cep}`).then(({ data }) => {\n            setOrderInfo(data.shipping);\n            setCepMessage(false);\n        }).catch(err => {\n            setCepMessage(true);\n        });\n    };\n\n    return (\n        <Page>\n            <Menu page=\"cart\" itemsQuantity={checkoutItems} />\n            <Container>\n                <Grid className=\"content-inner\">   \n                    <Grid.Row>                        \n                        <Grid.Column width={10}>\n                            { products.length > 0 ?    \n                                <>                    \n                                <Table basic='very'>\n                                    <Table.Header>\n                                    <Table.Row>\n                                        <Table.HeaderCell></Table.HeaderCell>\n                                        <Table.HeaderCell></Table.HeaderCell>\n                                        <Table.HeaderCell>Quantidade</Table.HeaderCell>\n                                        <Table.HeaderCell>Preço</Table.HeaderCell>\n                                        <Table.HeaderCell></Table.HeaderCell>\n                                    </Table.Row>\n                                    </Table.Header>\n\n                                    <Table.Body>\n                                        { products &&\n                                            products.map( item => \n                                                <Table.Row>\n                                                    <Table.Cell style={{ textAlign: 'center'}}><img src={item['image_thumb']} alt=\"\" height=\"76\" /></Table.Cell>\n                                                    <Table.Cell>{item.name}</Table.Cell>\n                                                    <Table.Cell>1</Table.Cell>\n                                                    <Table.Cell>{`R$ ${item.price}`}</Table.Cell>\n                                                    <Table.Cell><Button circular icon=\"trash alternate outline\" onClick={() => handleRemove(item.id)} /></Table.Cell>\n                                                </Table.Row>  \n                                            )\n                                        }\n                                    </Table.Body>\n                                </Table>\n                                \n                                <Divider />\n\n                                <span>Calcule frete e prazo</span>                  \n                                <Input placeholder='Digite o cep' maxlength=\"8\" style={{ margin: '0 10px' }} value={cep} onChange={ e => setCep(e.target.value) } />\n                                <Button content='OK' color=\"blue\" onClick={() => cepValidate()} />\n\n                                {cepMessage && <Message visible warning>Ops, ocorreu um erro inesperado. Tente novamente.</Message> }\n\n                                </>\n\n                                :\n\n                                <Message visible>Sua sacola está vazia</Message>\n                            }\n                        </Grid.Column> \n                        <Grid.Column width={6}>\n                            <Order>\n                                <Header as='h3'>Resumo do pedido</Header>\n                                <List verticalAlign='middle'>\n                                    <List.Item>\n                                        <List.Content floated='right'><strong>{`R$ ${totalSum}`}</strong></List.Content>\n                                        <List.Content>{`${totalQuantity} produtos`}</List.Content>\n                                    </List.Item>\n\n                                    { orderInfo &&\n                                        <>                                    \n                                            <List.Item>\n                                                <List.Content floated='right'><strong>{`R$ ${orderInfo.value}`}</strong></List.Content>\n                                                <List.Content>Frete</List.Content>\n                                            </List.Item>\n                                            <List.Item>\n                                            <List.Content>Entrega em {orderInfo.days} úteis</List.Content>\n                                            </List.Item>                                       \n\n                                            <Divider />\n\n                                            <List.Item>\n                                                <List.Content floated='right'><strong>{`R$ ${sumTotal(totalSum, orderInfo.value)}`}</strong></List.Content>\n                                                <List.Content><strong>TOTAL</strong></List.Content>\n                                            </List.Item>\n\n                                            <Divider />\n\n                                            <Button fluid color=\"green\">Continuar</Button>\n                                        </>\n                                    }       \n                                    \n                                </List>\n                            </Order>\n                        </Grid.Column> \n                    </Grid.Row>        \n                </Grid>\n            </Container>\n        </Page>\n    )\n};\n\nexport default Cart;\n\nconst Page = styled.section`\n    .content-inner {\n        margin-top: 20px;\n    }\n    .table th {\n        border-top: none;\n    }\n`\n\nconst Order = styled.div`\n    background-color: #f8f8f8;\n    padding: 15px;\n` \n"]},"metadata":{},"sourceType":"module"}